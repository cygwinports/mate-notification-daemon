--- origsrc/mate-notification-daemon-1.2.0/src/capplet/mate-notification-properties.c	2012-02-23 08:24:48.000000000 -0600
+++ src/mate-notification-daemon-1.2.0/src/capplet/mate-notification-properties.c	2012-04-16 19:25:14.213370800 -0500
@@ -23,6 +23,7 @@
 
 #include <glib/gi18n.h>
 #include <glib.h>
+#include <gmodule.h>
 #include <gtk/gtk.h>
 #include <mateconf/mateconf-client.h>
 #include <string.h>
@@ -203,7 +204,7 @@ static gchar* get_theme_name(const gchar
 {
 	/* TODO: Remove magic numbers. Strip "lib" and ".so" */
 	gchar* result = g_strdup(filename + 3);
-	result[strlen(result) - 3] = '\0';
+	result[strlen(result) - strlen("." G_MODULE_SUFFIX)] = '\0';
 	return result;
 }
 
@@ -227,7 +228,7 @@ static void notification_properties_dial
 	{
 		while ((filename = g_dir_read_name(dir)))
 		{
-			if (g_str_has_prefix(filename, "lib") && g_str_has_suffix(filename, ".so"))
+			if (g_str_has_suffix(filename, "." G_MODULE_SUFFIX))
 			{
 				theme_name = get_theme_name(filename);
 
--- origsrc/mate-notification-daemon-1.2.0/src/daemon/engines.c	2012-02-23 08:24:48.000000000 -0600
+++ src/mate-notification-daemon-1.2.0/src/daemon/engines.c	2012-04-16 19:23:28.973351400 -0500
@@ -57,12 +57,9 @@ static ThemeEngine* active_engine = NULL
 static ThemeEngine* load_theme_engine(const char *name)
 {
 	ThemeEngine* engine;
-	char* filename;
 	char* path;
 
-	filename = g_strdup_printf("lib%s.so", name);
-	path = g_build_filename(ENGINES_DIR, filename, NULL);
-	g_free (filename);
+	path = g_module_build_path (ENGINES_DIR, name);
 
 	engine = g_new0(ThemeEngine, 1);
 	engine->ref_count = 1;
@@ -114,7 +111,7 @@ static ThemeEngine* load_theme_engine(co
 
 		if (engine->module != NULL && !g_module_close (engine->module))
 		{
-			g_warning("%s: %s", filename, g_module_error());
+			g_warning("%s: %s", name, g_module_error());
 		}
 
 		g_free(engine);
--- origsrc/mate-notification-daemon-1.4.0/src/themes/coco/Makefile.am	2012-07-05 13:29:58.000000000 -0500
+++ src/mate-notification-daemon-1.4.0/src/themes/coco/Makefile.am	2012-11-15 01:31:10.562783700 -0600
@@ -5,5 +5,5 @@ engine_LTLIBRARIES = libcoco.la
 
 libcoco_la_SOURCES = coco-theme.c
 
-libcoco_la_LDFLAGS = -module -avoid-version
+libcoco_la_LDFLAGS = -module -avoid-version -no-undefined
 libcoco_la_LIBADD = $(THEME_LIBS) 
--- origsrc/mate-notification-daemon-1.4.0/src/themes/nodoka/Makefile.am	2012-07-05 13:29:58.000000000 -0500
+++ src/mate-notification-daemon-1.4.0/src/themes/nodoka/Makefile.am	2012-11-15 01:31:15.043039900 -0600
@@ -5,5 +5,5 @@ engine_LTLIBRARIES = libnodoka.la
 
 libnodoka_la_SOURCES = nodoka-theme.c
 
-libnodoka_la_LDFLAGS = -module -avoid-version
+libnodoka_la_LDFLAGS = -module -avoid-version -no-undefined
 libnodoka_la_LIBADD =  $(THEME_LIBS)
--- origsrc/mate-notification-daemon-1.2.0/src/themes/slider/Makefile.am	2012-02-23 08:24:48.000000000 -0600
+++ src/mate-notification-daemon-1.2.0/src/themes/slider/Makefile.am	2012-04-16 19:21:13.272589800 -0500
@@ -7,7 +7,7 @@ AM_CPPFLAGS = $(THEME_CFLAGS)
 
 libslider_la_SOURCES = theme.c
 
-libslider_la_LDFLAGS = -module -avoid-version
+libslider_la_LDFLAGS = -module -avoid-version -no-undefined
 libslider_la_LIBADD =	\
 	$(THEME_LIBS)	\
 	$(NULL)
--- origsrc/mate-notification-daemon-1.2.0/src/themes/standard/Makefile.am	2012-02-23 08:24:48.000000000 -0600
+++ src/mate-notification-daemon-1.2.0/src/themes/standard/Makefile.am	2012-04-16 19:21:17.308820600 -0500
@@ -3,7 +3,7 @@ enginedir = $(libdir)/mate-notification-
 engine_LTLIBRARIES = libstandard.la
 
 libstandard_la_SOURCES = theme.c
-libstandard_la_LDFLAGS = -module -avoid-version
+libstandard_la_LDFLAGS = -module -avoid-version -no-undefined
 libstandard_la_LIBADD  = $(NOTIFICATION_DAEMON_LIBS)
 
 INCLUDES = $(NOTIFICATION_DAEMON_CFLAGS)
